# 状态: [Accepted](http://xzmdsa.openjudge.cn/2025hw2/solution/48553810/)
```
基本信息
#: 48553810
题目: 250201
提交人: 2400012262+周知勤(Tianyi)
内存: 5368kB
时间: 53ms
语言: Python3
提交时间: 2025-03-13 20:07:04
```

## 问题的分析

本题要求处理两种操作：  
1. **修改操作**：将所有数增加一个值 \(d\)，并对结果取模 65536。  
2. **查询操作**：统计所有数中，二进制表示的第 \(i\) 位为 1 的数的个数。  

由于直接遍历所有数会导致超时（\(N\) 和 \(M\) 最大为 10000），我们需要优化查询操作的时间复杂度。

---

## 对解题方法的说明

### 核心思想
1. **预处理**：  
   - 对于每个二进制位 \(i\)（0 到 15），预先计算每个数在模 \(2^{i+1}\) 下的余数分布，并生成前缀和数组。  
   - 前缀和数组用于快速查询某个区间内满足条件的数的个数。  

2. **维护累加值**：  
   - 使用变量 \(D\) 记录所有修改操作的累加值，每次修改操作后更新 \(D\) 并取模 65536。  

3. **快速查询**：  
   - 根据当前的累加值 \(D\)，计算每个数加上 \(D\) 后的二进制位分布。  
   - 利用预处理的前缀和数组，快速统计满足条件的数的个数。  

### 时间复杂度
- 预处理：\(O(N \times 16)\)  
- 每次查询：\(O(1)\)  
- 每次修改：\(O(1)\)  

---
