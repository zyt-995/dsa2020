# 状态: [Accepted](http://dsbpython.openjudge.cn/dspythonbook/solution/48866766/)

```
基本信息
#: 48866766
题目: P1310
提交人: 谢冰2400011514(xb谢神)
内存: 18536kB
时间: 405ms
语言: Python3
提交时间: 2025-04-10 08:20:53
```

​为了解决这个问题，我们需要计算在蚂蚁王国的越野跑中，有多少对参赛者之间会发生赶超事件。赶超事件的定义是后面的蚂蚁速度比前面的蚂蚁快。我们可以通过统计顺序对（即后面的蚂蚁速度比前面蚂蚁速度快的情况）的数量来解决这个问题。

### 方法思路
我们可以使用树状数组（Fenwick Tree）来高效地统计顺序对的数量。具体步骤如下：

1. **离散化处理**：将蚂蚁的速度值映射到一个更小的范围内，以便树状数组高效处理。
2. **树状数组操作**：从后往前遍历每个蚂蚁的速度，使用树状数组来维护已经处理过的速度值的出现次数。对于每个速度值，查询当前树状数组中比该速度值大的元素数量，并累加到结果中。

### 代码解释
1. **FenwickTree类**：实现树状数组的数据结构，支持更新和查询操作。
2. **离散化处理**：将原始速度值映射到排序后的唯一值列表中的索引，以减少数值范围。
3. **遍历处理**：从后往前遍历每个速度值，使用树状数组统计当前速度值之后的更大速度值的数量，并累加结果。

这种方法的时间复杂度为O(n log n)，能够高效处理大规模数据。