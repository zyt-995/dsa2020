# 状态: [Accepted](http://dsbpython.openjudge.cn/dspythonbook/solution/48443001/)
```
基本信息
#:
48443001
题目:
P1220
提交人:
2400010604李凯瑞
内存:
6020kB
时间:
1004ms
语言:
Python3
提交时间:
2025-03-05 12:07:49
```

## 代码说明
这个问题可以抽象为一个图的差分约束问题。我们构造一个图，其中每个孩子代表一个顶点，每个关系 A B C 代表一条从 A 到 B 的边，边的权重为 C。问题转化为：在图从顶点 1 到顶点 N 的最短路径是多少。其中“最多多分”的糖果数目就是顶点 N 到顶点 1 的最大差。

这个问题可以使用 Bellman-Ford 算法来解决，因为它可以处理负权边，并且能够检测负权环。但是在这个问题中，给定的关系不会导致负权环，所以直接使用 Bellman-Ford 算法即可。

## 实现步骤：
初始化节点 1 的糖果数为 0，其他节点的糖果数为无穷大。
使用 Bellman-Ford 算法迭代所有关系，逐步更新每个节点的糖果数。
最后，返回节点 N 的糖果数与节点 1 的糖果数的差。