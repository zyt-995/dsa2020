# 状态: [Accepted](http://dsbpython.openjudge.cn/dspythonbook/solution/48805949/)

```
基本信息
#: 48805949
题目: P1360
提交人: 谢冰2400011514(xb谢神)
内存: 3592kB
时间: 20ms
语言: Python3
提交时间: 2025-04-02 23:14:18
```

为了解决这个问题，我们需要找到给定节点数n的AVL树的最大层数。AVL树是一种自平衡二叉搜索树，其左右子树的高度差不超过1。为了最大化层数，我们需要构造节点数最少的AVL树结构，这样可以在给定节点数的情况下达到最大高度。

### 方法思路
我们可以利用动态规划的思想来解决这个问题。通过递推公式计算出每个高度h对应的最少节点数N(h)，直到找到第一个超过给定节点数n的高度h。此时，最大层数即为h-1。

递推公式为：
\[ N(h) = 1 + N(h-1) + N(h-2) \]
其中，N(h)表示高度为h的AVL树的最少节点数。初始条件为N(0)=0，N(1)=1。

### 代码解释
1. **输入处理**：读取输入的节点数n。
2. **特殊情况处理**：如果n为0，直接输出0（题目中n>0，此部分为代码完整性考虑）。
3. **初始化变量**：prev_prev和prev分别表示N(h-2)和N(h-1)，初始为N(0)和N(1)。
4. **循环计算**：从h=2开始，逐步计算当前高度h对应的最少节点数current。如果current超过n，跳出循环；否则更新最大层数max_h，并递推更新prev_prev和prev。
5. **输出结果**：当循环结束时，max_h即为所求的最大层数。

这种方法的时间复杂度为O(h)，其中h是满足N(h) > n的最小高度，由于N(h)呈指数增长，h的值非常小，因此算法效率很高。