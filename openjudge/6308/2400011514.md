# 状态: [Accepted](http://dsbpython.openjudge.cn/dspythonbook/solution/49032856/)

```
基本信息
#: 49032856
题目: P0780
提交人: 谢冰2400011514(xb谢神)
内存: 5568kB
时间: 637ms
语言: Python3
提交时间: 2025-04-29 08:40:16
```

为了解决这个问题，我们需要将一般的树转换为二叉树，并计算转换前和转换后的树的高度。我们可以利用树的深度优先搜索信息（由字符串表示）来直接计算高度，而无需显式构建树的结构。

### 方法思路
1. **转换前的高度计算**：原树的高度可以通过遍历字符串时的最大深度来确定。每次遇到字符 'd' 时，深度加1，遇到字符 'u' 时，深度减1。维护一个最大值即可得到原树的高度。
2. **转换后的高度计算**：转换后的二叉树的高度需要考虑每个节点在其父节点的子节点中的顺序。每个节点的转换后的深度等于其父节点的转换后的深度加上该节点在父节点中的顺序。维护这个转换后的深度的最大值即可得到转换后的高度。

### 代码解释
1. **输入处理**：读取输入字符串直到遇到 '#' 为止。
2. **栈的使用**：栈用于维护当前节点的路径信息，每个元素保存当前节点的转换后的深度和子节点数目。
3. **深度计算**：每次遇到 'd' 时，计算当前节点的转换后的深度并更新最大值，同时维护原树的深度。遇到 'u' 时弹出栈顶元素，回到父节点。
4. **输出结果**：处理完每个字符串后，输出原树和转换后的树的高度。

这种方法高效且不需要显式构建树的结构，直接通过遍历字符串即可完成计算，适用于节点数较多的情况。